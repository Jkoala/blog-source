[参考链接](https://www.bilibili.com/video/BV1ay4y1D7o7/?spm_id_from=333.999.top_right_bar_window_custom_collection.content.click&vd_source=6df4aa7b31f2694a11d8f97c71a807d8)

## redis 为什么快

1. 直接放在内存中

2. 单线程中 避免切线程的消耗

3. 渐进式rehash 缓存时间戳

   要扩容的时候在建立一张hash 表，每次请求进来就命中hash 表中那个链表就就处理这个链表的元素，避免一次性拷贝造成阻塞。

   redis 建立了一个定时任务 每毫秒就去系统那当前的时间缓存起来，每次拿时间戳直接在缓存中拿。





## redis 有那些应用

1. 缓存  

2. 计数器

   可以对 String 进行自增自减运算，从而实现计数器功能。Redis 这种内存型数据库的读写性能非常高，很适合存储频繁读写的计数量。

3. 分布式会话

4. 排行榜

   Set 可以实现交集、并集等操作，从而实现共同好友等功能。ZSet 可以实现有序性操作，从而实现排行榜等功能。

5. 分布式锁

6. 消息队列

   List 是一个双向链表，可以通过 lpush 和 rpop 写入和读取消息。不过最好使用 Kafka、RabbitMQ 等消息中间件。

要扩散讲一下

## redis 6.0 之前为什么不用多线程

1. redis 不是瓶颈，它本身是一个异步回调的机制。
2. 它带有命令批量处理的功能 每秒可以达到 100w 请求
3. 单线程内部维护比较低
4. 多线程就要考虑线程切换、加锁解锁 导致死锁。
5. 渐进式rehash 也会出现问题



## redis 6.0  之后为什么要用多线程

1. 大公司需要更大QPS IO的多线程（内部执行命令还是单线程）

​	P5 跳过



## Redis 高级使用

1. 命令批量处理



## 批量redis

弱事物对于一些运行时事物不回滚







 