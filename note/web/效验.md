

## å‡†å¤‡æ¡ä»¶

```xml
<dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-starter-validation</artifactId>
</dependency>
```

## å¿«é€Ÿå¼€å§‹

1. åœ¨controller ä¸Šæ·»åŠ æ•ˆéªŒæ³¨è§£

  ```java
      @PostMapping("/v1/user/valid")
      public Result<List<User>> listUser(@Validated @RequestBody UserDTO userDTO){
          return null;
      }
  ```

2. åœ¨å®ä½“ç±»æ·»åŠ æ•ˆéªŒ

   ```java
       @PostMapping("/v1/user/valid")
       public Result<List<User>> listUser(@Validated @RequestBody UserDTO userDTO){
           return null;
       }
   ```




## å¸¸ç”¨æ•ˆéªŒ

| æ³¨è§£                                                         | ä½œç”¨                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| @Length(min = 2, max = 20, message = "å§“ååœ¨2-10ä¸ªå­—æ¯ä¹‹é—´") | ç”¨äºæ•ˆéªŒæ–‡æœ¬                                                 |
| @Range(min = 0, max = 120, message = "å¹´é¾„åœ¨0åˆ°120ä¹‹é—´") private Integer age; | ç”¨äºæ•ˆéªŒæ•°å­—                                                 |
| @NotEmpty                                                    | å­—ç¬¦ä¸²ã€é›†åˆã€æ•°ç»„	å­—ç¬¦ä¸²ä¸èƒ½ä¸ºç©º,é›†åˆæ•°ç»„é‡Œé¢çš„å…ƒç´ ä¸ªæ•°ä¸èƒ½ä¸º0* |
| @NotNullï¼š                                                   | ç”¨äºæ•ˆéªŒå¯¹è±¡                                                 |
| @Pattern(regexp = â€œ[abc]â€)ï¼š                                 | æ­£åˆ™æ•ˆéªŒ                                                     |
| @NotBlankï¼š                                                  | ä¸èƒ½ä¸ºç©ºï¼Œæ£€æŸ¥æ—¶ä¼šå°†ç©ºæ ¼å¿½ç•¥ ç”¨æ¥æ•ˆéªŒå­—ç¬¦ä¸²                  |
|                                                              |                                                              |

> 1. åŠ åœ¨DTO ä¸Šä¸ç”Ÿæ•ˆ 
> 2. url å¯ä»¥ - _ 
> 3. åŒºåˆ†å¤§å°å†™[^1]
> 4. @RequestBody ä¼šå˜æˆPost è¯·æ±‚

## ä½¿ç”¨æ¡ˆä¾‹

### åµŒå¥—æ•ˆéªŒ

1. controlller åŠ @Validated

   ```java
       @PostMapping("/v1/user/valid")
       public Result<List<User>> listUser(@Validated @RequestBody UserDTO userDTO){
           return null;
       }
   ```

2. å†…éƒ¨ç±»åŠ @Valid

   ```java
   @NoArgsConstructor
   @AllArgsConstructor
   @Data
   public class UserDTO {
   
       @Length(min = 0,max = 10)
       private String username;
       @NotBlank
       private String password;
   
       @NotNull
       @Valid
       private Role role;
   
   }
   ```

   

## å¸¸è§é—®é¢˜

### å¦‚ä½•é…ç½®å¿«é€Ÿå¤±è´¥

```java
@Bean
public Validator validator() {
    ValidatorFactory validatorFactory = Validation.byProvider(HibernateValidator.class)
            .configure()
            // å¿«é€Ÿå¤±è´¥æ¨¡å¼
            .failFast(true)
            .buildValidatorFactory();
    return validatorFactory.getValidator();
}


```

### @Validå’Œ@ValidatedåŒºåˆ« åº•å±‚éƒ½æ˜¯ Hibernate Validator

<table><thead><tr><th>åŒºåˆ«</th><th>@Valid</th><th>@Validated</th></tr></thead><tbody><tr><td>æä¾›è€…</td><td>JSR-303è§„èŒƒ</td><td>Spring</td></tr><tr><td>æ˜¯å¦æ”¯æŒåˆ†ç»„</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ ‡æ³¨ä½ç½®</td><td>METHOD(æ–¹æ³•), FIELD(å­—æ®µ), CONSTRUCTOR(æ„é€ å‡½æ•°), PARAMETER(å‚æ•°), TYPE_USE()</td><td>TYPE, METHOD, PARAMETER</td></tr><tr><td>åµŒå¥—æ ¡éªŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table>

1. @Validated å¯ä»¥ç”¨åœ¨controllerä¸Š     @Validä¸è¡Œ
2. PARAMETER

## å‚è€ƒæ–‡æ¡£

[å®˜æ–¹æ–‡æ¡£](https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-constraints)

[@Validå’Œ@ValidatedåŒºåˆ«](https://juejin.cn/post/7090327624970895397)

[Spring Validationæœ€ä½³å®è·µåŠå…¶å®ç°åŸç†ï¼Œå‚æ•°æ ¡éªŒæ²¡é‚£ä¹ˆç®€å•ï¼ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/6856541106626363399#heading-14)

[Spring Boot ä¼˜é›…åœ°å®ç°æ¥å£å‚æ•°æ ¡éªŒ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7078258211299541029)

## å¼•ç”¨

[^1]:ç½‘å€ http://www.chenggongla.com/studio/ å’Œ http://www.chenggongla.com/Studio/ æ˜¯ä¸ä¸€æ ·çš„ï¼Œåè€…æœ‰ä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œä¼šæ— æ³•è®¿é—®ã€‚é‚£ä¹ˆç½‘å€é“¾æ¥æ˜¯å¦åŒºåˆ†å¤§å°å†™å‘¢ï¼ŸURLçš„ç»“æ„æ˜¯ï¼š[åè®®]ğŸ˜•/[åŸŸå]/[è·¯å¾„]åè®®å’ŒåŸŸåéƒ¨åˆ†æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œä½†æ˜¯è·¯å¾„éƒ¨åˆ†åˆ™æ ¹æ®æœåŠ¡å™¨å¹³å°è€Œå®šã€‚Windows å’Œ Mac OS X ç³»ç»Ÿæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œè€Œé‡‡ç”¨UNIXå’ŒLinuxç³»çš„æœåŠ¡å™¨ç³»ç»Ÿæ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œè¯·å¤§å®¶è¦æ³¨æ„ã€‚

